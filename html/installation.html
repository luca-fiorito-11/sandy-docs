
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Getting started &#8212; SANDY  documentation</title>
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script async="async" type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="The ENDF-6 format" href="endf6.html" />
    <link rel="prev" title="Introduction" href="introduction.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="getting-started">
<h1>Getting started<a class="headerlink" href="#getting-started" title="Permalink to this headline">¶</a></h1>
<p>These instructions will get you a copy of the project up and running on your
local machine for development and testing purposes.</p>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">SANDY works with files in ENDF-6 format.
If you are not familiar with the format, have a look at the <a class="reference external" href="https://www.oecd-nea.org/dbdata/data/manual-endf/endf102.pdf">ENDF-6</a> documentation.</p>
</div>
<div class="section" id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">¶</a></h2>
<p>SANDY is developed in <code class="docutils literal notranslate"><span class="pre">python3</span></code> and does not support <code class="docutils literal notranslate"><span class="pre">python2</span></code>.
In order to run SANDY, make sure that you have a version of <code class="docutils literal notranslate"><span class="pre">python3</span></code> installed.
In file <code class="docutils literal notranslate"><span class="pre">requirements.txt</span></code> you can find the python dependencies required to ensure
the correct functioning of SANDY.</p>
<p>To read and write ENDF-6 formatted files, SANDY uses some fortran routines.
Make sure that you have a valid fortran compiler installed.</p>
<p>SANDY has been developed and tested on a Ubuntu machine.</p>
</div>
<div class="section" id="installation">
<h2>Installation<a class="headerlink" href="#installation" title="Permalink to this headline">¶</a></h2>
<p>To install SANDY, run the following commands</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">cd</span> <span class="n">sandy</span>
<span class="n">python</span> <span class="n">setup</span><span class="o">.</span><span class="n">py</span> <span class="n">install</span>
</pre></div>
</div>
<p>Make sure that <code class="code bash docutils literal notranslate"><span class="pre">python</span></code> points to a correct <code class="docutils literal notranslate"><span class="pre">python3</span></code> version for which
you have administration rights.</p>
</div>
<div class="section" id="running-the-tests">
<h2>Running the tests<a class="headerlink" href="#running-the-tests" title="Permalink to this headline">¶</a></h2>
<p>Once the installation is completed, run <code class="docutils literal notranslate"><span class="pre">pytest</span></code> to automatically start SANDY’s tests</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span>
</pre></div>
</div>
<p>More <a class="reference external" href="https://docs.pytest.org/en/latest/">pytest</a> command line options can be added to customize the tests set.</p>
<p>More than 50 tests have been put in place in SANDY, and cover the whole range
of data types that the code can process.
Their purpose is to check the correct functioning of each basic SANDY unit, as
well as to ensure that the implemented physics is correct.</p>
<p>For a list of the existing SANDY test, type</p>
<div class="code python highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">pytest</span>  <span class="o">--</span><span class="n">collect</span><span class="o">-</span><span class="n">only</span>
</pre></div>
</div>
<p>Each name has a self-explanatory name for the function it performs.</p>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>For an overview of SANDY’s usage type</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sandy</span>  <span class="o">--</span><span class="n">help</span>
</pre></div>
</div>
<p>The code will print out the following message:</p>
<div class="code highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">usage</span><span class="p">:</span> <span class="n">python</span> <span class="o">-</span><span class="n">m</span> <span class="n">sandy</span><span class="o">.</span><span class="n">sampling</span> <span class="p">[</span><span class="o">-</span><span class="n">h</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">cov</span> <span class="n">COV</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">samples</span> <span class="n">SAMPLES</span><span class="p">]</span>
                                <span class="p">[</span><span class="o">--</span><span class="n">outdir</span> <span class="n">DIR</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">processes</span> <span class="n">PROCESSES</span><span class="p">]</span>
                                <span class="p">[</span><span class="o">--</span><span class="nb">max</span><span class="o">-</span><span class="n">polynomial</span> <span class="n">MAX_POLYNOMIAL</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">eig</span> <span class="n">N</span><span class="p">]</span>
                                <span class="p">[</span><span class="o">--</span><span class="n">mat</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="o">..</span><span class="p">,</span><span class="mi">9999</span><span class="p">}</span> <span class="p">[{</span><span class="mi">1</span><span class="p">,</span><span class="o">..</span><span class="p">,</span><span class="mi">9999</span><span class="p">}</span> <span class="o">...</span><span class="p">]]</span>
                                <span class="p">[</span><span class="o">--</span><span class="n">mf</span> <span class="p">{</span><span class="mi">31</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">35</span><span class="p">}</span> <span class="p">[{</span><span class="mi">31</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">35</span><span class="p">}</span> <span class="o">...</span><span class="p">]]</span>
                                <span class="p">[</span><span class="o">--</span><span class="n">mt</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="o">..</span><span class="p">,</span><span class="mi">999</span><span class="p">}</span> <span class="p">[{</span><span class="mi">1</span><span class="p">,</span><span class="o">..</span><span class="p">,</span><span class="mi">999</span><span class="p">}</span> <span class="o">...</span><span class="p">]]</span>
                                <span class="p">[</span><span class="o">--</span><span class="n">outname</span> <span class="n">OUTNAME</span><span class="p">]</span> <span class="p">[</span><span class="o">--</span><span class="n">debug</span><span class="p">]</span>
                                <span class="n">file</span>

<span class="n">Run</span> <span class="n">sampling</span>

<span class="n">positional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="n">file</span>                  <span class="n">ENDF</span><span class="o">-</span><span class="mi">6</span> <span class="ow">or</span> <span class="n">PENDF</span> <span class="nb">format</span> <span class="n">file</span>

<span class="n">optional</span> <span class="n">arguments</span><span class="p">:</span>
  <span class="o">-</span><span class="n">h</span><span class="p">,</span> <span class="o">--</span><span class="n">help</span>            <span class="n">show</span> <span class="n">this</span> <span class="n">help</span> <span class="n">message</span> <span class="ow">and</span> <span class="n">exit</span>
  <span class="o">--</span><span class="n">cov</span> <span class="n">COV</span><span class="p">,</span> <span class="o">-</span><span class="n">C</span> <span class="n">COV</span>     <span class="n">file</span> <span class="n">containing</span> <span class="n">covariances</span>
  <span class="o">--</span><span class="n">samples</span> <span class="n">SAMPLES</span><span class="p">,</span> <span class="o">-</span><span class="n">S</span> <span class="n">SAMPLES</span>
                        <span class="n">number</span> <span class="n">of</span> <span class="n">samples</span>
                        <span class="p">(</span><span class="n">default</span> <span class="o">=</span> <span class="mi">200</span><span class="p">)</span>
  <span class="o">--</span><span class="n">outdir</span> <span class="n">DIR</span><span class="p">,</span> <span class="o">-</span><span class="n">D</span> <span class="n">DIR</span>  <span class="n">target</span> <span class="n">directory</span> <span class="n">where</span> <span class="n">outputs</span> <span class="n">are</span> <span class="n">stored</span>
                        <span class="p">(</span><span class="n">default</span> <span class="o">=</span> <span class="n">current</span> <span class="n">working</span> <span class="n">directory</span><span class="p">)</span>
                        <span class="k">if</span> <span class="n">it</span> <span class="n">does</span> <span class="ow">not</span> <span class="n">exist</span> <span class="n">it</span> <span class="n">will</span> <span class="n">be</span> <span class="n">created</span>
  <span class="o">--</span><span class="n">processes</span> <span class="n">PROCESSES</span><span class="p">,</span> <span class="o">-</span><span class="n">N</span> <span class="n">PROCESSES</span>
                        <span class="n">number</span> <span class="n">of</span> <span class="n">worker</span> <span class="n">processes</span>
                        <span class="p">(</span><span class="n">default</span> <span class="o">=</span> <span class="mi">1</span><span class="p">)</span>
  <span class="o">--</span><span class="nb">max</span><span class="o">-</span><span class="n">polynomial</span> <span class="n">MAX_POLYNOMIAL</span><span class="p">,</span> <span class="o">-</span><span class="n">P</span> <span class="n">MAX_POLYNOMIAL</span>
                        <span class="n">Maximum</span> <span class="n">order</span> <span class="n">of</span> <span class="n">Legendre</span> <span class="n">polynomial</span> <span class="n">coefficients</span>
                        <span class="n">considered</span> <span class="k">for</span> <span class="n">sampling</span>
                        <span class="p">(</span><span class="n">default</span> <span class="o">=</span> <span class="nb">all</span><span class="p">)</span>
  <span class="o">--</span><span class="n">eig</span> <span class="n">N</span>               <span class="nb">print</span> <span class="n">the</span> <span class="n">first</span> <span class="n">N</span> <span class="n">eigenvalues</span> <span class="n">of</span> <span class="n">the</span> <span class="n">evaluated</span>
                        <span class="n">covariance</span> <span class="n">matrices</span>
                        <span class="p">(</span><span class="n">default</span> <span class="o">=</span> <span class="n">do</span> <span class="ow">not</span> <span class="nb">print</span><span class="p">)</span>
  <span class="o">--</span><span class="n">mat</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="o">..</span><span class="p">,</span><span class="mi">9999</span><span class="p">}</span> <span class="p">[{</span><span class="mi">1</span><span class="p">,</span><span class="o">..</span><span class="p">,</span><span class="mi">9999</span><span class="p">}</span> <span class="o">...</span><span class="p">]</span>
                        <span class="n">draw</span> <span class="n">samples</span> <span class="n">only</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">selected</span> <span class="n">MAT</span> <span class="n">sections</span>
                        <span class="p">(</span><span class="n">default</span> <span class="o">=</span> <span class="n">keep</span> <span class="nb">all</span><span class="p">)</span>
  <span class="o">--</span><span class="n">mf</span> <span class="p">{</span><span class="mi">31</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">35</span><span class="p">}</span> <span class="p">[{</span><span class="mi">31</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">34</span><span class="p">,</span><span class="mi">35</span><span class="p">}</span> <span class="o">...</span><span class="p">]</span>
                        <span class="n">draw</span> <span class="n">samples</span> <span class="n">only</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">selected</span> <span class="n">MF</span> <span class="n">sections</span>
                        <span class="p">(</span><span class="n">default</span> <span class="o">=</span> <span class="n">keep</span> <span class="nb">all</span><span class="p">)</span>
  <span class="o">--</span><span class="n">mt</span> <span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="o">..</span><span class="p">,</span><span class="mi">999</span><span class="p">}</span> <span class="p">[{</span><span class="mi">1</span><span class="p">,</span><span class="o">..</span><span class="p">,</span><span class="mi">999</span><span class="p">}</span> <span class="o">...</span><span class="p">]</span>
                        <span class="n">draw</span> <span class="n">samples</span> <span class="n">only</span> <span class="kn">from</span> <span class="nn">the</span> <span class="n">selected</span> <span class="n">MT</span> <span class="n">sections</span>
                        <span class="p">(</span><span class="n">default</span> <span class="o">=</span> <span class="n">keep</span> <span class="nb">all</span><span class="p">)</span>
  <span class="o">--</span><span class="n">outname</span> <span class="n">OUTNAME</span><span class="p">,</span> <span class="o">-</span><span class="n">O</span> <span class="n">OUTNAME</span>
                        <span class="n">basename</span> <span class="k">for</span> <span class="n">the</span> <span class="n">output</span> <span class="n">files</span>
                        <span class="p">(</span><span class="n">default</span> <span class="ow">is</span> <span class="n">the</span> <span class="n">the</span> <span class="n">basename</span> <span class="n">of</span> <span class="o">&lt;</span><span class="n">file</span><span class="o">&gt;.</span><span class="p">)</span>
  <span class="o">--</span><span class="n">debug</span>               <span class="n">turn</span> <span class="n">on</span> <span class="n">debug</span> <span class="n">mode</span>
</pre></div>
</div>
</div>
<div class="section" id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">¶</a></h2>
<div class="section" id="data-and-covariances-are-in-the-same-file">
<h3>Data and covariances are in the same file<a class="headerlink" href="#data-and-covariances-are-in-the-same-file" title="Permalink to this headline">¶</a></h3>
<p>Produce 1000 perturbed copies of a ENDF-6 file <code class="code bash docutils literal notranslate"><span class="pre">&lt;tape&gt;</span></code> that contains both
evaluated data and covariances.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sandy</span>  <span class="o">&lt;</span><span class="n">tape</span><span class="o">&gt;</span>  <span class="o">--</span><span class="n">samples</span> <span class="mi">1000</span>
</pre></div>
</div>
<p>Below are reported the ENDF-6 data sections that will be perturbed and the
respective covariance sections.</p>
<table border="1" class="docutils">
<colgroup>
<col width="41%" />
<col width="24%" />
<col width="34%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Data type</th>
<th class="head">Data section</th>
<th class="head">Covariance section</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>fission multiplicities</td>
<td>MF1</td>
<td>MF31</td>
</tr>
<tr class="row-odd"><td>cross sections</td>
<td>MF3</td>
<td>MF33</td>
</tr>
<tr class="row-even"><td>angular ditributions</td>
<td>MF4</td>
<td>MF34</td>
</tr>
<tr class="row-odd"><td>energy distributions</td>
<td>MF5</td>
<td>MF35</td>
</tr>
</tbody>
</table>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">cross sections will be perturbed <strong>only</strong> if they are linearized
and given in PENDF (pointwise-ENDF) format.
To convert a ENDF-6 file into PENDF format, you can use nuclear data processing
codes such as <a class="reference external" href="http://www.njoy21.io/NJOY2016/">NJOY</a> or <a class="reference external" href="https://www-nds.iaea.org/public/endf/prepro/">PREPRO</a>.</p>
</div>
</div>
<div class="section" id="perturb-only-one-or-few-data-types">
<h3>Perturb only one or few data types<a class="headerlink" href="#perturb-only-one-or-few-data-types" title="Permalink to this headline">¶</a></h3>
<p>Add keyword option <code class="code bash docutils literal notranslate"><span class="pre">--mf</span></code> to perturb only few data types.
For example, to produce 1000 perturbed copies of a file <code class="code bash docutils literal notranslate"><span class="pre">&lt;tape&gt;</span></code> where
only angular and energy distributions are perturbed, type</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sandy</span>  <span class="o">&lt;</span><span class="n">tape</span><span class="o">&gt;</span>  <span class="o">--</span><span class="n">samples</span> <span class="mi">1000</span>  <span class="o">--</span><span class="n">mf</span> <span class="mi">34</span> <span class="mi">35</span>
</pre></div>
</div>
</div>
<div class="section" id="data-and-covariances-are-in-different-files">
<h3>Data and covariances are in different files<a class="headerlink" href="#data-and-covariances-are-in-different-files" title="Permalink to this headline">¶</a></h3>
<p>Produce 1000 perturbed copies of a file <code class="code bash docutils literal notranslate"><span class="pre">&lt;tape&gt;</span></code> that contains evaluated
data using covariances from file <code class="code bash docutils literal notranslate"><span class="pre">&lt;covtape&gt;</span></code>.</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sandy</span>  <span class="o">&lt;</span><span class="n">tape</span><span class="o">&gt;</span>  <span class="o">--</span><span class="n">cov</span> <span class="o">&lt;</span><span class="n">covtape</span><span class="o">&gt;</span>  <span class="o">--</span><span class="n">samples</span> <span class="mi">1000</span>
</pre></div>
</div>
<div class="admonition important">
<p class="first admonition-title">Important</p>
<p class="last">this command is often used for perturbing cross sections, where
the linearized data are in a PENDF file <code class="code bash docutils literal notranslate"><span class="pre">&lt;tape&gt;</span></code> that might
not contain covariances and the covariance data are in the original
ENDF-6 file <code class="code bash docutils literal notranslate"><span class="pre">&lt;covtape&gt;</span></code>.</p>
</div>
</div>
<div class="section" id="covariance-data-in-errorr-format">
<h3>Covariance data in ERRORR format<a class="headerlink" href="#covariance-data-in-errorr-format" title="Permalink to this headline">¶</a></h3>
<p>ERRORR is a <a class="reference external" href="http://www.njoy21.io/NJOY2016/">NJOY</a> module that processes the covariance information present in a
ENDF-6 file into a given multigroup structure.
The resulting tabulated covariance is tabulated into an output file with a specific
ERRORR format.
Not only does ERRORR process cross section covariances in <code class="docutils literal notranslate"><span class="pre">MF33</span></code>, but it can
also handle the resonance-resonance covariances in ENDF-6 covariance section
<code class="docutils literal notranslate"><span class="pre">MF32</span></code>.</p>
<p>To produce 1000 perturbed copies of a PENDF file <code class="code bash docutils literal notranslate"><span class="pre">&lt;pendf_tape&gt;</span></code> including the
<code class="docutils literal notranslate"><span class="pre">MF32</span></code>
covariances for resonance parameters, type</p>
<div class="code bash highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">sandy</span>  <span class="o">&lt;</span><span class="n">pendf_tape</span><span class="o">&gt;</span>  <span class="o">--</span><span class="n">cov</span> <span class="o">&lt;</span><span class="n">errorr_tape</span><span class="o">&gt;</span>  <span class="o">--</span><span class="n">samples</span> <span class="mi">1000</span>
</pre></div>
</div>
<p>where <code class="code bash docutils literal notranslate"><span class="pre">&lt;errorr_tape&gt;</span></code> is a ERRORR output file.</p>
</div>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">SANDY</a></h1>








<h3>Navigation</h3>
<p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Getting started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l2"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l2"><a class="reference internal" href="#running-the-tests">Running the tests</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="endf6.html">The ENDF-6 format</a></li>
<li class="toctree-l1"><a class="reference internal" href="theory.html">Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="uncertainty_propagation.html">Uncertainty propagation</a></li>
<li class="toctree-l1"><a class="reference internal" href="exercises.html">Exercises</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
      <li>Previous: <a href="introduction.html" title="previous chapter">Introduction</a></li>
      <li>Next: <a href="endf6.html" title="next chapter">The ENDF-6 format</a></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Luca Fiorito.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.8.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/installation.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>